# 冯诺依曼结构
将程序指令和数据存储在同一个读写存储器（内存）中，计算机的工作流程则是按顺序执行存储器中的指令
## 五大组成部分
1.	中央处理单元CPU：负责解释计算机程序中的指令和处理数据
2.	存储器：存储程序和数据。指令和数据共享同个存储区
3.	输入设备：用于将数据和程序输入到程序中
4.	输出设备：将处理结果展示给用户
5.	控制单元CU：协调其他部件的操作
## 工作流程
1.	指令和数据的存储：在开始执行程序之前，程序的指令和所需的数据被加载到存储器中
2.	指令的执行：CPU从存储器中读取指令，解析指令，然后执行指令，这个过程包括从存储器中读取数据、在算术逻辑单元（ALU）中进行计算，以及将结果写回存储器或通过输出设备展示出来
 
# CPU在程序执行时的流水线
取指令  解码  执行  访存  写回
上述流程是循环进行的，每条指令都会经历上述五个流程，可以看出在任何一个时钟周期内都最多可以有5条指令处于不同的执行阶段。
下面是这五个流程的详细说明
1.	取指令 从内存中读取指令
CPU利用pc指针从内存中读取指令，读取后pc指针会更新到下一条指令的地址，为下一个周期准备
2.	解码 解析指令并准备必要的操作数
指令解码器解析取出的指令，确定需要执行的操作和操作数，比如从指令中提取立即数、计算地址、确定寄存器编号等
3.	执行 执行计算或者其他操作
执行阶段根据解码阶段的结果，进行相应的算术逻辑运算（ALU）、分支决策或其他操作。此阶段可能需要使用到ALU单元
4.	访存 进行内存访问，如数据加载或者存储
如果指令需要读取内存（如加载操作）或向存储器写入可以在这一阶段完成，可选
5.	写回 将执行结果写回寄存器
将执行阶段的结果或者从内存中读取到的数据写回到指定寄存器。使得该条指令的结果可以被后续指令使用
# 最简CPU
利用数组来模拟内存，其中存放待执行的指令，pc指针用来指向下一条待执行指令，RISC-V有32个寄存器，可以用数组来存放，寄存器用来存放临时产生的数据
 
## 取指令操作 fetch
从CPU内部的DRAM中获取当前pc指针指向的指令
 
## 解码操作 – 实现add指令 和 addi指令
### add 指令
用于将两个寄存器中的数值相加，并将结果存储在另外一个寄存器中。这是一种寄存器到寄存器的操作
Add 目标寄存器1, 源寄存器1, 源寄存器2
#### 指令内部组成
该指令在RISC-V中是一种R型指令，其指令中有六部分组成
1.	操作码：标识这是一种什么操作的字段
2.	目标寄存器：存放操作结果的寄存器
3.	功能码1：对操作进一步细化 说明操作是哪一个
4.	源寄存器1：
5.	源寄存器2：
6.	功能码2：与功能码1合作确定操作为add
 
### addi 指令
用于将一个寄存器中的数和一个立即数相加，并将结果存储在另一个寄存器中
Addi 目标寄存器1, 源寄存器1, 立即数
#### 指令内部组成
Addi是一种I型指令，其内部主要由五部分组成
1.	操作码：标识操作类型的手段
2.	目标寄存器：存放操作结果的寄存器
3.	功能码：进一步确定操作类型
4.	源寄存器
5.	立即数：补码形式存储
 
 # RISC-V格式的汇编代码
为了验证上述CPUadd和addi指令的合理性，我们编写了.s文件里面是汇编代码
 
 
后续使用RISC-V工具链将汇编文件变为二进制文件然后传给源码得到的执行文件
 
# 内存和总线

